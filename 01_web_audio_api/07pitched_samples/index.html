<!-- 

  | ~ ~ ~ ~ ~ ~ || WEB AUDIO API WORKSHOP || ~ ~ ~ ~ ~ ~ |

  This file will play a pitched sample!
  The Keyboard works like this

  |   |   | |   |   |   |   | |   | |   |   |   |
  |   | W | | E |   |   | T | | Y | | U |   |   |
  |   |___| |___|   |   |___| |___| |___|   |   |___
  |     |     |     |     |     |     |     |     |
  |  A  |  S  |  D  |  F  |  G  |  H  |  J  |  K  |
  |_____|_____|_____|_____|_____|_____|_____|_____|_

  By Alessandro Contini
  based on work by Boris Smus

  Released under Beer-Ware license https://en.wikipedia.org/wiki/Beerware

 -->

<html>
  <head>
    <title>Pitched samples</title>
  </head>

<!-- THE STYLE -->
  <style type="text/css">
    body {
      font-family: Helvetica, Arial;
      font-weight: bold;
      font-size: 4em;
      text-align: center;
    }
  </style>

<!-- THE CONTENT -->
  <body>
    <p>Press keyboard for pitched sample</p>
  </body>

<!-- THE MAGIC! -->
  <script src="shared.js"></script>
  <script type="text/javascript">

    loadSounds(this, {
      kick: 'kick.wav',
      snare: 'snare.wav'
    });


    function playSound(buffer, time, semitones) {
      var source = context.createBufferSource();
      source.buffer = buffer;
      source.connect(context.destination);
      source.detune.setValueAtTime(semitones * 100, 0);
      source[source.start ? 'start' : 'noteOn'](time);
    }

    window.addEventListener("load", loadSounds);

    // ----- INTERACTION ----- //
    window.addEventListener("keydown", function(e) {
     switch (e.keyCode) {   // check keyCode here http://keycode.info/
          case 65:  // A key
            playSound(this.snare, 0, 0);
          break;
          case 87:  // W key
            playSound(this.snare, 0, 1);
          break;
          case 83:  // S key
            playSound(this.snare, 0, 2);
          break;
          case 69:  // E key
            playSound(this.snare, 0, 3);
          break;
          case 68:  // D key
            playSound(this.snare, 0, 4);
          break;
          case 70:  // F key
            playSound(this.snare, 0, 5);
          break;
          case 84:  // T key
            playSound(this.snare, 0, 6);
          break;
          case 71:  // G key
            playSound(this.snare, 0, 7);
          break;
          case 89:  // Y key
            playSound(this.snare, 0, 8);
          break;
          case 72:  // H key
            playSound(this.snare, 0, 9);
          break;
          case 74:  // J key
            playSound(this.snare, 0, 10);
          break;
          case 75:  // K key
            playSound(this.snare, 0, 11);
          break;
     }});
  </script>
</html>